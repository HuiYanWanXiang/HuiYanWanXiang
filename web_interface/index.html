<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç»˜æ¼”ä¸‡è±¡ | æ ¸å¿ƒæ§åˆ¶å°</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <style>
        .settings-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border: 1px dashed var(--border-color);
            margin-bottom: 20px;
        }
        .settings-row { margin-bottom: 10px; }
        .settings-row label { display: block; color: #888; font-size: 11px; margin-bottom: 4px; }
        .settings-row select, .settings-row input {
            width: 100%;
            background: #222;
            border: 1px solid #444;
            color: var(--accent-color);
            padding: 5px;
            border-radius: 4px;
            font-size: 12px;
            outline: none;
        }
        /* éšè—æ‰ BaseURL å’Œ ModelName è¾“å…¥æ¡†ï¼Œé™¤éé€‰æ‹©è‡ªå®šä¹‰ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†åªè®©ç”¨æˆ·é€‰å‚å•† */
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>ç»˜æ¼”ä¸‡è±¡ <span style="font-size:12px; opacity:0.6;">PRO</span></h2>
        
        <span class="label">âš™ï¸ å¼•æ“é…ç½® (ENGINE CONFIG)</span>
        <div class="settings-box">
            <div class="settings-row">
                <label>é€‰æ‹©æ¨¡å‹å‚å•† (Provider)</label>
                <select id="providerSelect" onchange="updateModelConfig()">
                    <option value="deepseek">DeepSeek (æ·±åº¦æ±‚ç´¢)</option>
                    <option value="moonshot">Kimi (æœˆä¹‹æš—é¢)</option>
                    <option value="aliyun">é€šä¹‰åƒé—® (é˜¿é‡Œäº‘)</option>
                    <option value="custom">è‡ªå®šä¹‰ (Custom)</option>
                </select>
            </div>
            
            <div class="settings-row">
                <label>API Key (å¯†é’¥)</label>
                <input type="password" id="apiKeyInput" placeholder="sk-xxxxxxxx..." value="">
            </div>

            <div class="settings-row" id="customUrlRow" style="display:none;">
                <label>Base URL</label>
                <input type="text" id="baseUrlInput" value="https://api.deepseek.com">
            </div>
             <div class="settings-row" id="customModelRow" style="display:none;">
                <label>Model Name</label>
                <input type="text" id="modelNameInput" value="deepseek-coder">
            </div>
        </div>

        <span class="label">æŒ‡ä»¤è¾“å…¥ (PROMPT)</span>
        <textarea id="userPrompt" placeholder="> ä¾‹å¦‚ï¼šç”Ÿæˆä¸€ä¸ªå—è¿«æŒ¯åŠ¨æ¼”ç¤º..."></textarea>
        
        <div class="btn-group">
            <button class="primary" id="generateBtn" onclick="generatePage()">ğŸš€ å¯åŠ¨ç”Ÿæˆ</button>
            <button onclick="applyCode()">âš¡ æ‰‹åŠ¨è¿è¡Œ</button>
        </div>

        <div class="code-panel">
            <span class="label">æºç ç¼–è¾‘å™¨</span>
            <textarea id="codeEditor" placeholder="// ç­‰å¾…ç”Ÿæˆ..." spellcheck="false"></textarea>
        </div>
    </div>

    <div class="preview-area">
        <div class="status-bar" id="statusText"><span class="blink"></span>WAITING FOR CONFIG...</div>
        <div class="iframe-container">
            <iframe id="previewFrame"></iframe>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
    <script>
        // ç®€å•çš„é…ç½®åˆ‡æ¢é€»è¾‘
        function updateModelConfig() {
            const provider = document.getElementById('providerSelect').value;
            const urlRow = document.getElementById('customUrlRow');
            const modelRow = document.getElementById('customModelRow');
            const urlInput = document.getElementById('baseUrlInput');
            const modelInput = document.getElementById('modelNameInput');

            if (provider === 'custom') {
                urlRow.style.display = 'block';
                modelRow.style.display = 'block';
            } else {
                urlRow.style.display = 'none';
                modelRow.style.display = 'none';
                // é¢„è®¾å‚æ•°
                if (provider === 'deepseek') {
                    urlInput.value = "https://api.deepseek.com";
                    modelInput.value = "deepseek-coder";
                } else if (provider === 'moonshot') {
                    urlInput.value = "https://api.moonshot.cn/v1";
                    modelInput.value = "moonshot-v1-8k";
                } else if (provider === 'aliyun') {
                    urlInput.value = "https://dashscope.aliyuncs.com/compatible-mode/v1";
                    modelInput.value = "qwen-plus";
                }
            }
        }
        // åˆå§‹åŒ–ä¸€æ¬¡
        updateModelConfig();
    </script>
</body>
</html>